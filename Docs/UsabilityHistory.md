# ユーザビリティ改善・フィードバック対応の履歴まとめ / Usability & Feedback Response History

本ドキュメントは、これまでユーザーの指摘や使い勝手向上のために行った改善を時系列の「ストーリー」として整理したものです。開発者が適宜スクリーンショットを差し込み、依頼者にどのような課題をどう解決してきたかを説明するための土台として活用してください。

## 1. 保存先の見える化とクラウド挙動の明示
- **課題**: 保存後に「どこへファイルが行ったのか」「オフライン時にどうなるのか」が不透明で混乱を招いていた。
- **対応**:
  - 保存完了ポップアップでローカル保存先・iCloud共有フォルダ・Google Drive の行を色付きで列挙し、パスやアップロード状態を一目で確認できるようにした。オフライン時は「queued」として件数付きで通知し、オンライン復帰時に自動送信されることを明示。【F:PitTemp/Features/Measure/MeasureView.swift†L2055-L2134】
  - iCloud 共有リンク配下の実際のフォルダ階層（日付フォルダ / 端末フォルダ / ファイル名）をそのまま表示し、ローカル保存先との違いもラベルで強調。【F:PitTemp/Features/Measure/MeasureView.swift†L2140-L2176】
  - アップロード進行中や失敗のみをバッジ表示し、完了は保存ポップアップ側で伝えることで「緑文字が重なって読みにくい」といった指摘を解消。【F:PitTemp/Features/Measure/MeasureView.swift†L2293-L2378】
- **スクショ候補**: 保存完了バナー（オンライン時とオフライン時）、iCloud/Drive ステータスチップの表示切り替え。

## 2. セッション識別子（人間向けラベル + UUID）の透過性向上
- **課題**: CSV に残る識別情報が分かりにくく、サポート問い合わせやログ突合で迷うケースがあった。
- **対応**:
  - 設定画面に「Session ID / UUID」セクションを設け、読み方の例や用途を日本語で解説。クラウドに両方を埋め込む理由も併記し、ユーザーと管理者が同じ前提で運用できるようにした。【F:PitTemp/Features/Settings/SettingsView.swift†L142-L159】
  - CSV 生成時に、人が読める短いラベルと UUID の両方をパスやメタデータへ埋め込み、Drive 側のフォルダ構造（Day / Session）でもラベルを活用して検索性を高めた。【F:PitTemp/Features/Measure/MeasureView.swift†L2074-L2184】【F:PitTemp/Shared/Models/SessionFileContext.swift†L8-L42】
- **スクショ候補**: 設定画面の説明セクション、保存完了バナーに表示される「Session」行。

## 3. ライブラリ（Drive CSV 一覧）の整理とメタデータ可視化
- **課題**: CSV ダウンロード一覧がファイル名頼りで、ドライバーや端末などの文脈が読み取りづらかった。
- **対応**:
  - ライブラリのリストをグリッド化し、ドライバー／トラック／車両／端末名、セッションラベルと UUID、日付フォルダを行単位で表示。検索・並べ替えもメタデータを対象にして探しやすくした。【F:PitTemp/Features/Library/LibraryView.swift†L1425-L1514】
- **スクショ候補**: Drive CSV 一覧画面（検索バー、並べ替えメニュー、グリッド行の見え方）。

## 4. デバイスフォルダ名の短縮と衝突回避
- **課題**: 端末ごとのエクスポートフォルダ名が長く、空白や機種名の揺れで Finder 表示や共有時に混乱しやすかった。
- **対応**:
  - フォルダ名を「端末名（最大24文字の整形版） + 機種ラベル + UUID 先頭8文字」で構成し、読みやすさと一意性のバランスをとった。空白や異常入力はサニタイズして衝突やバグを防止。【F:PitTemp/Shared/Data/CSV/CSVExporter.swift†L124-L161】
- **スクショ候補**: 出力先フォルダ階層（日付フォルダ配下の端末フォルダが短く整理されている様子）。

---

これらの改善点を順に示すことで、「どのフィードバックにどう応えたか」を発注者へ説明しやすくなります。スクリーンショットを差し込む際は、実際の入力例やオフライン時の挙動が分かる状態で撮ると、より説得力のある資料になります。
