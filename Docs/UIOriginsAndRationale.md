# UI構成の由来とユーザフィードバック整理 / UI Origins & Feedback Mapping

このドキュメントは、これまで寄せられたユーザビリティ指摘やUI改善要望を時系列と論点で整理し、現行UIがどのような根拠に基づいて形作られたのかを説明するためのベースです。開発者は適宜スクリーンショットや計測ログを差し込み、将来の改善時に「過去の経緯を踏まえた最適な判断」ができるよう活用してください。

## 情報源のスナップショット
- 過去の改善ストーリーをまとめた "Usability & Feedback Response History"。【F:Docs/UsabilityHistory.md†L1-L34】
- ユーザー指摘と対応を表形式で俯瞰できる "User Feedback Responses"。【F:Docs/UserFeedbackResponses.md†L1-L24】

## 主なユーザーの声とUIへの反映
### 1. 保存先の見える化とクラウド制御
- **ユーザーの声**: 「保存後にどこへ行ったか分からない」「オフライン時の挙動が不安」「クラウドへ上げたくないケースがある」。【F:Docs/UsabilityHistory.md†L5-L11】【F:Docs/UserFeedbackResponses.md†L10-L12】
- **UIへの落とし込み**:
  - 保存完了ポップアップにローカル/iCloud/Drive 行を色分けで表示し、オフライン時は queued 件数を明示。これにより保存先と同期状態を一目で把握できる導線を確保。【F:Docs/UsabilityHistory.md†L5-L11】
  - 設定画面に「Upload after Save」トグルとプロフィール入力を配置し、クラウド送信の有無とフォルダ名の命名規則をユーザー自身が制御できるようにした。【F:Docs/UserFeedbackResponses.md†L10-L12】

### 2. セッション識別子の透過性
- **ユーザーの声**: CSVやサポート問い合わせ時に識別情報が分かりづらいので、人間可読なラベルとUUIDを揃えて欲しい。【F:Docs/UsabilityHistory.md†L13-L18】
- **UIへの落とし込み**:
  - 設定画面へ「Session ID / UUID」説明セクションを追加し、読み方と運用方法をテキストで共有。保存完了バナーにも同じ概念を表示し、画面間で一貫したメンタルモデルを提供。【F:Docs/UsabilityHistory.md†L13-L18】
  - CSV生成とクラウドパスに両方を埋め込むことで、ライブラリ検索や問い合わせ対応時に迷わない構造を維持。【F:Docs/UsabilityHistory.md†L13-L18】

### 3. ライブラリ一覧の文脈強化
- **ユーザーの声**: CSV一覧がファイル名頼りで、誰の記録か・どの車両かが見えない。【F:Docs/UsabilityHistory.md†L20-L24】
- **UIへの落とし込み**: ライブラリをグリッド化し、ドライバー/トラック/車両/端末名・セッションラベル・日付を一行に集約。メタデータ検索・並べ替えをサポートして目的の記録へ直行できるようにした。【F:Docs/UsabilityHistory.md†L20-L24】

### 4. デバイスフォルダ名の簡潔化と衝突回避
- **ユーザーの声**: 端末フォルダ名が長すぎたり空白が混ざり、Finderで見づらい・共有時に紛らわしい。【F:Docs/UsabilityHistory.md†L26-L30】
- **UI/データ設計への落とし込み**: フォルダ名を「整形済み端末名 + 機種ラベル + UUID先頭8文字」に統一し、読みやすさと一意性を両立。異常入力はサニタイズして表示バグを防止するポリシーを採用。【F:Docs/UsabilityHistory.md†L26-L30】

### 5. 音声入力( Meta Voice )の補正フロー
- **ユーザーの声**: 長音欠落や誤認識（例: ゼッケン→石鹸）で抽出が失敗するので、辞書強化と手動修正の余地が欲しい。【F:Docs/UserFeedbackResponses.md†L8-L11】
- **UIへの落とし込み**:
  - 認識キーワードのデフォルトを長音なし・誤認識語まで拡充し、旧設定のみ自動マイグレーション。既存ユーザーの入力を壊さず改善を届けるための安全策。【F:Docs/UserFeedbackResponses.md†L8-L11】
  - Meta Voice画面に「手動で微調整」ブロックを追加し、認識直後に修正できるワークフローを提供。【F:Docs/UserFeedbackResponses.md†L8-L11】

### 6. オートセーブと履歴モードの安全運用
- **ユーザーの声**: 履歴閲覧中にライブ計測のオートセーブが上書きしないか心配。保存有無のログを知りたい。【F:Docs/UserFeedbackResponses.md†L11-L13】
- **UIへの落とし込み**: 履歴モード中はオートセーブを完全停止し、復元・読込・手動削除のログをUIに流して「いま何が保存されたか」を明示するステータス表示を導入。【F:Docs/UserFeedbackResponses.md†L11-L13】

## 現行UIの設計原則（再確認）
- **可視性**: 保存先・同期状態・識別子を画面の近い場所で見える化し、バックグラウンド処理の不透明さを排除する。【F:Docs/UsabilityHistory.md†L5-L18】
- **自己決定権**: クラウド送信可否やフォルダ命名をユーザー設定に委ね、運用ポリシーの違いを吸収。【F:Docs/UserFeedbackResponses.md†L10-L12】【F:Docs/UsabilityHistory.md†L26-L30】
- **文脈保持**: ライブラリやCSVにメタデータを載せ、どの計測かを後追いできる形で提示する。【F:Docs/UsabilityHistory.md†L13-L24】
- **安全性**: 上書き事故や誤認識に対するガードとして、オートセーブ停止や手動補正のエスケープハッチを必ず用意。【F:Docs/UserFeedbackResponses.md†L8-L13】

## ドキュメントの使い方
- 重要なUIセクション（保存完了ポップアップ、設定のトグル、ライブラリ一覧、Meta Voice補正パネルなど）をこの章の直下にスクリーンショットで追加し、時系列の指摘と紐づけてください。
- 新しい改善を行った際は「主なユーザーの声とUIへの反映」に小見出しを追加し、元の指摘ソースや課題の背景を必ずメモしておくと、後続の意思決定がしやすくなります。

